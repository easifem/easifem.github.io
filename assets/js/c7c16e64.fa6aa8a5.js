"use strict";(self.webpackChunkeasifem_docs=self.webpackChunkeasifem_docs||[]).push([[79056],{16920:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"VTKFile/VTKFile_test_14","title":"VTKFile example 14","description":"Use association","source":"@site/docs/docs-api/VTKFile/VTKFile_test_14.md","sourceDirName":"VTKFile","slug":"/VTKFile/VTKFile_test_14","permalink":"/docs-api/VTKFile/VTKFile_test_14","draft":false,"unlisted":false,"editUrl":"https://github.com/easifem/easifem.github.io/tree/main/docs/docs-api/VTKFile/VTKFile_test_14.md","tags":[{"inline":true,"label":"VTKFile","permalink":"/docs-api/tags/vtk-file"}],"version":"current","lastUpdatedAt":1724304782000,"frontMatter":{"title":"VTKFile example 14","author":"Vikas Sharma, Ph.D.","date":"29 Nov 2021","update":"29 Nov 2021","tags":["VTKFile"]},"sidebar":"tutorialSidebar","previous":{"title":"VTKFile_test_13","permalink":"/docs-api/VTKFile/VTKFile_test_13"},"next":{"title":"VTKFile example 2","permalink":"/docs-api/VTKFile/VTKFile_test_2"}}');var a=t(23420),r=t(54213);const s={title:"VTKFile example 14",author:"Vikas Sharma, Ph.D.",date:"29 Nov 2021",update:"29 Nov 2021",tags:["VTKFile"]},l="VTKFile example 14",o={},d=[{value:"Use association",id:"use-association",level:2},{value:"Usage",id:"usage",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"vtkfile-example-14",children:"VTKFile example 14"})}),"\n",(0,a.jsx)(n.h2,{id:"use-association",children:"Use association"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"[[Mesh_]]"}),"\n",(0,a.jsx)(n.li,{children:"[[HDF5File_]]"}),"\n",(0,a.jsx)(n.li,{children:"[[VTKFile_]]"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"PROGRAM main\n    use easifemBase\n    use easifemClasses\n    TYPE( mesh_ ) :: obj\n    INTEGER( I4B ) :: ierr, ii\n    TYPE( HDF5File_ ) :: domainFile\n    TYPE( VTKFile_ ) :: vtkfile\n    REAL( DFP ), ALLOCATABLE :: nodeCoord( :, : ), pressure( : )\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL Display( "Testing ExportToVTK" )\n    CALL domainFile%initiate( filename="./mesh.h5", mode="READ" )\n    CALL domainFile%open()\n'})}),"\n",(0,a.jsx)(n.p,{children:'!!! note "Initiate Mesh"'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL obj%Initiate(hdf5=domainFile, group="/surfaceEntities_1" )\n'})}),"\n",(0,a.jsx)(n.p,{children:'!!! note ""\nGet nodal coordinates of the mesh.'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL obj%getNodeCoord(nodeCoord=nodeCoord, hdf5=domainFile, &\n        & group="/nodeCoord")\n'})}),"\n",(0,a.jsxs)(n.p,{children:['!!! note ""\nExport mesh to [[VTKFile_]] format. This will write the information of\nmesh inside the ',(0,a.jsx)(n.code,{children:"surfaceEntities_1.vtu"})," file."]}),"\n",(0,a.jsx)(n.p,{children:"The file will have the following properties"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'mode="NEW"'}),"\n",(0,a.jsxs)(n.li,{children:["DataFormat=",(0,a.jsx)(n.code,{children:"VTK_BINARY_APPENDED"})]}),"\n",(0,a.jsxs)(n.li,{children:["DataStructureType=",(0,a.jsx)(n.code,{children:"VTK_UnStructuredGrid"})]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Note that we have set ",(0,a.jsx)(n.code,{children:"CloseTag"})," to ",(0,a.jsx)(n.code,{children:".false."})," since we want to write more information."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL obj%ExportToVTK(vtkFile=vtkFile, nodeCoord=nodeCoord, &\n        & filename="./surfaceEntities_1.vtu", OpenTag=.TRUE., &\n        & Content=.TRUE., CloseTag=.FALSE.)\n'})}),"\n",(0,a.jsx)(n.p,{children:'!!! note "Write node data"'}),"\n",(0,a.jsxs)(n.p,{children:["Because it is nodal data, we mention location as ",(0,a.jsx)(n.code,{children:"node"}),". Also we want to open the PointData tag, since we have initiated writing the data."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL vtkFile%WriteDataArray(location=String('node'), &\n        & action=String('open'))\n"})}),"\n",(0,a.jsx)(n.p,{children:"Let us prepare the noda data for pressure."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL reallocate(pressure, obj%getTotalNodes())\n    CALL random_NUMBER(pressure); pressure = pressure * 10\n"})}),"\n",(0,a.jsx)(n.p,{children:"Now that the data is ready, let us flush it in the [[VTKFile_]]."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL vtkFile%WriteDataArray(name=String("node_data"), &\n        & x=pressure, numberOfComponents=1)\n'})}),"\n",(0,a.jsx)(n.p,{children:"If you want to write more point data, then add it below."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL vtkFile%WriteDataArray(name=String("pressure"), &\n        & x=pressure, numberOfComponents=1)\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Now that we are done with writing point data, let us close the ",(0,a.jsx)(n.code,{children:"<PointData>"})," tag."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL vtkFile%WriteDataArray(location=String('node'), &\n        & action=String('close'))\n"})}),"\n",(0,a.jsx)(n.p,{children:'!!! note "Write Cell Data"'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL vtkFile%WriteDataArray(location=String('cell'), &\n        & action=String('open'))\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL reallocate(pressure, obj%getTotalElements())\n    CALL random_NUMBER(pressure); pressure = pressure * 10\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:'    CALL vtkFile%WriteDataArray(name=String("cell_data"), &\n        & x=pressure, numberOfComponents=1)\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL vtkFile%WriteDataArray(location=String('cell'), &\n        & action=String('close'))\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL vtkFile%WritePiece()\n    CALL vtkFile%Close()\n"})}),"\n",(0,a.jsx)(n.p,{children:'!!! settings "Cleanup"'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-fortran",children:"    CALL obj%Deallocate()\n    CALL domainFile%Deallocate()\nEND PROGRAM main\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},54213:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(36672);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);